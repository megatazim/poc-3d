define(["./arrayFill-6162b951","./arrayRemoveDuplicates-a80848e1","./buildModuleUrl-89a61082","./Cartesian3-6ab6e817","./Check-d771f3f9","./ComponentDatatype-9e683007","./PolylineVolumeGeometryLibrary-f8406ae5","./CorridorGeometryLibrary-8764d2b5","./defaultValue-6195d6e4","./Ellipsoid-9d24693d","./GeometryAttribute-b7129781","./GeometryAttributes-bc1c2f3f","./GeometryOffsetAttribute-da5a1d35","./IndexDatatype-7f829734","./Math-77022010","./PolygonPipeline-5d307ca1","./PrimitiveType-5db31a9b","./Cartographic-84b54204","./FeatureDetection-d5e675a3","./defer-a21481c0","./Rectangle-f1a1bbf0","./Event-8b63693e","./RuntimeError-3afc2b48","./WebGLConstants-92042d9e","./Cartesian4-da892aa1","./EllipsoidTangentPlane-f8d45d42","./IntersectionTests-0125ff6b","./Plane-588042d8","./PolylinePipeline-0d83acd5","./EllipsoidGeodesic-4e69d466","./EllipsoidRhumbLine-7f7a0363"],(function(e,t,i,r,o,a,n,s,l,u,d,p,h,f,c,g,y,b,v,A,_,m,E,w,T,P,D,G,k,L,O){"use strict";var x=new r.o,N=new r.o,H=new r.o;function I(e,t){var i,o,u,h=[],c=e.positions,g=e.corners,y=e.endPositions,b=new p.a,v=0,A=0,_=0;for(o=0;o<c.length;o+=2)v+=u=c[o].length-3,_+=u/3*4,A+=c[o+1].length-3;for(v+=3,A+=3,o=0;o<g.length;o++){i=g[o];var m=g[o].leftPositions;l.e(m)?(v+=u=m.length,_+=u/3*2):(A+=u=g[o].rightPositions.length,_+=u/3*2)}var E,w=l.e(y);w&&(v+=E=y[0].length-3,A+=E,_+=4*(E/=3));var T,P,D,G,k,L,O=v+A,I=new Float64Array(O),C=0,S=O-1,R=E/2,U=f.IndexDatatype.createTypedArray(O/3,_+4),M=0;if(U[M++]=C/3,U[M++]=(S-2)/3,w){h.push(C/3),L=x,k=N;var B=y[0];for(o=0;o<R;o++)L=r.o.fromArray(B,3*(R-1-o),L),k=r.o.fromArray(B,3*(R+o),k),s.b.addAttribute(I,k,C),s.b.addAttribute(I,L,void 0,S),G=(P=C/3)+1,D=(T=(S-2)/3)-1,U[M++]=T,U[M++]=D,U[M++]=P,U[M++]=G,C+=3,S-=3}var F=0,V=c[F++],j=c[F++];for(I.set(V,C),I.set(j,S-j.length+1),u=j.length-3,h.push(C/3,(S-2)/3),o=0;o<u;o+=3)G=(P=C/3)+1,D=(T=(S-2)/3)-1,U[M++]=T,U[M++]=D,U[M++]=P,U[M++]=G,C+=3,S-=3;for(o=0;o<g.length;o++){var z,Y,q=(i=g[o]).leftPositions,W=i.rightPositions,J=H;if(l.e(q)){for(S-=3,Y=D,h.push(G),z=0;z<q.length/3;z++)J=r.o.fromArray(q,3*z,J),U[M++]=Y-z-1,U[M++]=Y-z,s.b.addAttribute(I,J,void 0,S),S-=3;h.push(Y-Math.floor(q.length/6)),t===n.S.BEVELED&&h.push((S-2)/3+1),C+=3}else{for(C+=3,Y=G,h.push(D),z=0;z<W.length/3;z++)J=r.o.fromArray(W,3*z,J),U[M++]=Y+z,U[M++]=Y+z+1,s.b.addAttribute(I,J,C),C+=3;h.push(Y+Math.floor(W.length/6)),t===n.S.BEVELED&&h.push(C/3-1),S-=3}for(V=c[F++],j=c[F++],V.splice(0,3),j.splice(j.length-3,3),I.set(V,C),I.set(j,S-j.length+1),u=j.length-3,z=0;z<j.length;z+=3)P=(G=C/3)-1,T=(D=(S-2)/3)+1,U[M++]=T,U[M++]=D,U[M++]=P,U[M++]=G,C+=3,S-=3;C-=3,S+=3,h.push(C/3,(S-2)/3)}if(w){C+=3,S-=3,L=x,k=N;var K=y[1];for(o=0;o<R;o++)L=r.o.fromArray(K,3*(E-o-1),L),k=r.o.fromArray(K,3*o,k),s.b.addAttribute(I,L,void 0,S),s.b.addAttribute(I,k,C),P=(G=C/3)-1,T=(D=(S-2)/3)+1,U[M++]=T,U[M++]=D,U[M++]=P,U[M++]=G,C+=3,S-=3;h.push(C/3)}else h.push(C/3,(S-2)/3);return U[M++]=C/3,U[M++]=(S-2)/3,b.position=new d.o({componentDatatype:a.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:I}),{attributes:b,indices:U,wallIndices:h}}function C(e){var t=(e=l.u(e,l.u.EMPTY_OBJECT)).positions,i=e.width;o.o.typeOf.object("options.positions",t),o.o.typeOf.number("options.width",i);var a=l.u(e.height,0),s=l.u(e.extrudedHeight,a);this._positions=t,this._ellipsoid=u.t.clone(l.u(e.ellipsoid,u.t.WGS84)),this._width=i,this._height=Math.max(a,s),this._extrudedHeight=Math.min(a,s),this._cornerType=l.u(e.cornerType,n.S.ROUNDED),this._granularity=l.u(e.granularity,c.e.RADIANS_PER_DEGREE),this._offsetAttribute=e.offsetAttribute,this._workerName="createCorridorOutlineGeometry",this.packedLength=1+t.length*r.o.packedLength+u.t.packedLength+6}C.pack=function(e,t,i){o.o.typeOf.object("value",e),o.o.typeOf.object("array",t),i=l.u(i,0);var a=e._positions,n=a.length;t[i++]=n;for(var s=0;s<n;++s,i+=r.o.packedLength)r.o.pack(a[s],t,i);return u.t.pack(e._ellipsoid,t,i),i+=u.t.packedLength,t[i++]=e._width,t[i++]=e._height,t[i++]=e._extrudedHeight,t[i++]=e._cornerType,t[i++]=e._granularity,t[i]=l.u(e._offsetAttribute,-1),t};var S=u.t.clone(u.t.UNIT_SPHERE),R={positions:void 0,ellipsoid:S,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,offsetAttribute:void 0};return C.unpack=function(e,t,i){o.o.typeOf.object("array",e),t=l.u(t,0);for(var a=e[t++],n=new Array(a),s=0;s<a;++s,t+=r.o.packedLength)n[s]=r.o.unpack(e,t);var d=u.t.unpack(e,t,S);t+=u.t.packedLength;var p=e[t++],h=e[t++],f=e[t++],c=e[t++],g=e[t++],y=e[t];return l.e(i)?(i._positions=n,i._ellipsoid=u.t.clone(d,i._ellipsoid),i._width=p,i._height=h,i._extrudedHeight=f,i._cornerType=c,i._granularity=g,i._offsetAttribute=-1===y?void 0:y,i):(R.positions=n,R.width=p,R.height=h,R.extrudedHeight=f,R.cornerType=c,R.granularity=g,R.offsetAttribute=-1===y?void 0:y,new C(R))},C.createGeometry=function(o){var n=o._positions,u=o._width,p=o._ellipsoid;n=function(e,t){for(var i=0;i<e.length;i++)e[i]=t.scaleToGeodeticSurface(e[i],e[i]);return e}(n,p);var b=t.D(n,r.o.equalsEpsilon);if(!(b.length<2||u<=0)){var v,A=o._height,_=o._extrudedHeight,m=!c.e.equalsEpsilon(A,_,0,c.e.EPSILON2),E={ellipsoid:p,positions:b,width:u,cornerType:o._cornerType,granularity:o._granularity,saveAttributes:!1};if(m)E.height=A,E.extrudedHeight=_,E.offsetAttribute=o._offsetAttribute,v=function(t){var i=t.ellipsoid,r=I(s.b.computePositions(t),t.cornerType),o=r.wallIndices,n=t.height,u=t.extrudedHeight,p=r.attributes,c=r.indices,y=p.position.values,b=y.length,v=new Float64Array(b);v.set(y);var A=new Float64Array(2*b);if(y=g.A.scaleToGeodeticHeight(y,n,i),v=g.A.scaleToGeodeticHeight(v,u,i),A.set(y),A.set(v,b),p.position.values=A,b/=3,l.e(t.offsetAttribute)){var _=new Uint8Array(2*b);if(t.offsetAttribute===h.z.TOP)_=e.d(_,1,0,b);else{var m=t.offsetAttribute===h.z.NONE?0:1;_=e.d(_,m)}p.applyOffset=new d.o({componentDatatype:a.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:_})}var E,w=c.length,T=f.IndexDatatype.createTypedArray(A.length/3,2*(w+o.length));T.set(c);var P,D,G=w;for(E=0;E<w;E+=2){var k=c[E],L=c[E+1];T[G++]=k+b,T[G++]=L+b}for(E=0;E<o.length;E++)D=(P=o[E])+b,T[G++]=P,T[G++]=D;return{attributes:p,indices:T}}(E);else if((v=I(s.b.computePositions(E),E.cornerType)).attributes.position.values=g.A.scaleToGeodeticHeight(v.attributes.position.values,A,p),l.e(o._offsetAttribute)){var w=v.attributes.position.values.length,T=new Uint8Array(w/3),P=o._offsetAttribute===h.z.NONE?0:1;e.d(T,P),v.attributes.applyOffset=new d.o({componentDatatype:a.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:T})}var D=v.attributes,G=i.i.fromVertices(D.position.values,void 0,3);return new d.I({attributes:D,indices:v.indices,primitiveType:y._0x1da42a.LINES,boundingSphere:G,offsetAttribute:o._offsetAttribute})}},function(e,t){return l.e(t)&&(e=C.unpack(e,t)),e._ellipsoid=u.t.clone(e._ellipsoid),C.createGeometry(e)}}));
