define(["./Cartesian3-6ab6e817","./Cartesian4-da892aa1","./Cartographic-84b54204","./defaultValue-6195d6e4","./Math-77022010","./createTaskProcessorWorker","./Check-d771f3f9"],(function(e,r,a,t,n,o,i){"use strict";var s=new r.e(1,1/255,1/65025,1/160581375),f=new r.e,u=1024;function d(a,t,o,i,d,v,c){var h=a.longitude,g=a.latitude,l=a.height;if(h=n.e.toDegrees(h),g=n.e.toDegrees(g),h<t[0]||h>t[2]||g<t[1]||g>t[3])return-1;for(var p=!1,b=0,k=.1*i,m=0;m<=o;m+=i){if(Math.abs(d+m-l)<k){p=!0;break}b++}if(!p)return-1;if(v.length<0)return-1;p=!1;for(var C=0;C<v.length;C+=2){var D=e.o.fromDegrees(h,g,l),w=e.o.fromDegrees(v[C+0],v[C+1],l);if(e.o.distance(D,w)<k){p=!0;break}}if(!p)return-1;var x=t[2]-t[0],y=(l=t[3]-t[1],t[0]-.025*x),M=t[1]-.025*l;x+=.05*x,l+=.05*l;var I=parseInt((h-y)/x*u),P=parseInt((g-M)/l*u);I=I<1?1:I,P=P<1?1:P;var z=c[b],A=0;for(C=-1;C<2;C++)for(var B=-1;B<2;B++){var R=4*(u*(P+B)+(I+C));f.x=z[R],f.y=z[R+1],f.z=z[R+2],f.w=z[R+3],r.e.divideByScalar(f,255,f),A=Math.max(A,r.e.dot(f,s))}return A=A>.999?1:A}return o((function(r,t){for(var n=r.points,o=r.enuPoints,i=r.bounds,s=r.extend,f=r.spacing,u=r.bottom,v=r.pixelsArray,c=[],h=0,g=n.length;h<g;h++){var l=n[h],p=d(a.a.fromCartesian(l),i,s,f,u,o,v);c.push({position:e.o.clone(l),shadowRatio:p})}return{resultData:c}}))}));
